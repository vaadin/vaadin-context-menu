<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>vaadin-context-menu Basic Examples</title>

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../../vaadin-grid/vaadin-grid.html">

  <link rel="import" href="common.html">
</head>

<body unresolved>
  <div class="vertical-section-container centered">
    <nav class="vertical-section">
      <ul class="layout horizontal wrap">
        <li><a href="index.html">Basic Examples</a></li>
        <li><b>Advanced Usage</b></li>
      </ul>
    </nav>

    <h3>Context Menu Advanded Usage</h3>
    <p>
      Right-Click on the headers to open a context menu that will allow you hide and show columns in the grid.
    </p>
    <demo-snippet>
      <template>
        <grid-example></grid-example>
        <dom-module id="grid-example">
          <template>
            <vaadin-grid id="grid" frozen-columns="1" items="[[_items()]]" columns="{{columns}}">
              <table>
                <colgroup>
                  <col name="name" resizable>
                  <col name="surname" resizable>
                  <col name="activity">
                  <col name="target">
                  <col name="effort">
                </colgroup>
              </table>
            </vaadin-grid>

            <vaadin-context-menu id="menu" target-selector="#grid" close-on="">
                <paper-menu multi selected-values="{{selectedValues}}">
                  <paper-item>Name</paper-item>
                  <paper-item>Surname</paper-item>
                  <paper-item>Activity</paper-item>
                  <paper-item>Target</paper-item>
                  <paper-item>Effort</paper-item>
                </paper-menu>
            </vaadin-context-menu>
        </template>
      </dom-module>
      <script>
        Polymer({
          is: 'grid-example',
          properties: {
            selectedValues: {
              type: Array,
              value: [0,1,2,3,4]
            }
          },
          observers: [
            '_selectedChanged(selectedValues.*)'
          ],
          ready: function() {
            // Cancel event unless the user clicks on the header
            this.$.grid.addEventListener('contextmenu', function(e) {
              if (this.$.grid.getRowIndex(e.target) > -1) {
                e.stopImmediatePropagation();
              }
            }.bind(this), true);
          },
          _items: function() {
            return getRandomItems();
          },
          _selectedChanged: function() {
            for (var i = 0; this.columns && i < this.columns.length; i++) {
              this.columns[i].hidden = !this.selectedValues.includes(i);
            }
          },
        });
      </script>

      </template>

    </demo-snippet>

  </div>
</body>
</html>
